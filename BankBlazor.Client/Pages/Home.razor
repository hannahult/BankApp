@page "/"
@inject HttpClient Http
@using BankBlazor.Client.ViewModels

<div class="hero-banner">
    <img src="/images/hero.jpg" alt="Bank Banner" />
</div>

<div class="text-center mt-5">
    <h1 class="display-4 fw-bold">Welcome to Bank Blazor</h1>
    <p class="lead">Please select your role:</p>

    <div class="mt-4">
        <NavLink class="btn btn-primary btn-lg m-3" href="/customer-portal">Customer</NavLink>
        <NavLink class="btn btn-secondary btn-lg m-3" href="/employee-portal">Employee</NavLink>
    </div>
</div>
@if (Holiday != null)
{
    <section class="text-center mt-4">
        <h5>Next Scottish bank holiday:</h5>
        <p><strong>@Holiday.Title</strong> on <strong>@Holiday.Date.ToString("yyyy-MM-dd")</strong></p>
    </section>
}

<style>
    .hero-banner {
        width: 100%;
        height: 150px;
        overflow: hidden;
        position: relative;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

        .hero-banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

    .btn {
        min-width: 160px;
        font-size: 1.1rem;
    }
</style>

@code {
    public HolidayViewModel? Holiday { get; set; }

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Holiday = await Http.GetFromJsonAsync<HolidayViewModel>("https://localhost:7127/api/external/bank-holidays");
        }
        catch (Exception ex)
        {
            Console.WriteLine("Failed to load holiday: " + ex.Message);
        }
    }
}

